# Configuration file for Customer Behavior Analysis Platform

# Data Configuration
data:
  raw_data_path: "data/raw/ecommerce.parquet"
  processed_data_path: "data/processed/processed_data.parquet"
  sample_size: 100000  # Set to null for full dataset
  test_size: 0.20
  validation_size: 0.25
  random_state: 42

# Feature Configuration
features:
  numerical:
    - price
    - hour
    - is_weekend
    - total_clicks
    - avg_session_time
    - purchase_freq
    - products_viewed
    - price_range
    - session_duration
    - recency
    - frequency
    - monetary
  categorical:
    - main_category
    - rfm_segment
  target: target

# Model Configuration
model:
  type: xgboost
  objective: "binary:logistic"
  eval_metric: "auc"
  tree_method: "hist"
  device: "cpu"  # Options: "cpu" or "cuda"
  early_stopping_rounds: 50
  
  # Hyperparameter tuning
  hyperparameters:
    learning_rate: [0.01, 0.05, 0.1]
    max_depth: [3, 5, 7]
    min_child_weight: [1, 3, 5]
    subsample: [0.8, 1.0]
    colsample_bytree: [0.8, 1.0]
    n_estimators: [100, 200]
  
  # Class imbalance handling
  scale_pos_weight: null  # Auto-calculate from data if null
  
  # Hyperparameter search
  search_method: "grid"  # Options: "grid", "random", "bayesian"
  cv_folds: 3
  n_iter: 20  # For random search

# Cross-Validation Configuration
cross_validation:
  n_splits: 5
  stratified: true
  shuffle: true
  random_state: 42

# Threshold Configuration
threshold:
  default: 0.5
  optimization_metric: "f1"  # Options: "f1", "precision", "recall", "j_statistic"
  use_optimal: true

# Model Evaluation Configuration
evaluation:
  metrics:
    - accuracy
    - precision
    - recall
    - f1_score
    - roc_auc
    - pr_auc
    - brier_score
  
  # Calibration
  calibration_bins: 10
  
  # Lift/Gain
  percentiles: [0.05, 0.1, 0.2, 0.3, 0.5]

# SHAP Configuration
shap:
  max_samples: 1000  # For SHAP calculation
  plot_samples: 50  # For force plots
  background_samples: 100

# RFM Configuration
rfm:
  n_clusters: 4
  features:
    - recency
    - frequency
    - monetary

# Logging Configuration
logging:
  level: "INFO"  # Options: "DEBUG", "INFO", "WARNING", "ERROR"
  format: "[%(asctime)s] [%(levelname)s] [%(name)s] - %(message)s"
  file: "logs/app.log"
  max_bytes: 10485760  # 10MB
  backup_count: 5

# MLflow Configuration
mlflow:
  enabled: true
  tracking_uri: "mlruns"
  experiment_name: "customer_behavior_prediction"
  artifact_location: "mlruns/artifacts"

# Model Storage Configuration
storage:
  models_dir: "models"
  save_preprocessor: true
  save_metadata: true
  versioning: true

# Dashboard Configuration
dashboard:
  title: "Customer Conversion Prediction Dashboard"
  page_layout: "wide"
  theme: "light"
  cache_data: true

# API Configuration
api:
  host: "0.0.0.0"
  port: 8000
  reload: true
  workers: 4
  timeout: 60
  cors_origins:
    - "http://localhost:3000"
    - "http://localhost:8501"
